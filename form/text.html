<!DOCTYPE html>
<html>
<head>
  <title>效验</title>
  <meta charset="utf-8">
  <style>
    input.error{
      border: 1px solid #FA1C29;
    }
  </style>
</head>
<body>

<form id="form" action="" method="post">
  <p>用户名:<input type="text" name="username" data-pattern="[a-zA-Z]{4,}" data-message="·用户名最少4个字母" placeholder="最少4个字母"></p>
  <p>密码:<input type="password" name="password" data-pattern="[\d{4,}]" data-message="密码最少4个数字" placeholder="最少4个数字"></p>
  <p>email:<input type="text" name="email" data-pattern="@" data-message="必须包含@" placeholder="必须包含@"></p>
  <p><button type="submit" id="check">效验</button><button type="reset">重置</button></p>
</form>

<script>
  var check = document.querySelector( '#check' );
  var form = document.querySelector( 'form' );

  check.addEventListener("click", function( event ){
    var result = validate( form )

    if( result !==true ){
      window.alert( result[ 0 ].message );
      result[ 0 ].input.focus();
    }else{
      window.alert( '全部通过' );
    }
  } );

  function validate( form ){
    var btn = [].slice.call( form.querySelectorAll( '[data-pattern]' ) );
    var result = [];

    btn.forEach( function( input ){
      var regx = RegExp( input.dataset.pattern );

      if( !regx.test( input.value ) ){
         result.push( {
          input: input,
          message: input.dataset.message
         })
       } 
    } );
    return result.length ? result : true;
  }
</script>
</body>
</html> 